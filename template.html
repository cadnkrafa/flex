<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>เลือก Flex Template</title>
  <style>
    .template-card {
      border: 1px solid #ccc;
      border-radius: 12px;
      padding: 16px;
      margin: 16px 0;
      background: #f9f9f9;
    }
    .flex-preview {
      border: 1px solid #ddd;
      margin-top: 8px;
      padding: 12px;
      background: #fff;
    }
    pre {
      background: #222;
      color: #0f0;
      padding: 10px;
      border-radius: 8px;
      overflow-x: auto;
    }
  </style>
</head>
<body>
  <h2>เลือก Flex Template</h2>
  <div id="template-list"></div>

  <script>
    const templates = [
      {
        name: "โปรโมชั่นร้านค้า",
        altText: "โปรโมชั่นพิเศษ!",
        imageUrl: "https://developers-resource.landpress.line.me/fx/clip/clip1.jpg",
        flexJson: {
          type: "bubble",
          hero: {
            type: "image",
            url: "https://developers-resource.landpress.line.me/fx/clip/clip1.jpg",
            size: "full",
            aspectRatio: "2:3",
            aspectMode: "cover"
          },
          body: {
            type: "box",
            layout: "vertical",
            spacing: "md",
            contents: [
              {
                type: "text",
                text: "โปรโมชั่นพิเศษ!",
                wrap: true,
                weight: "bold",
                size: "xl"
              },
              {
                type: "button",
                style: "primary",
                color: "#00c300",
                action: {
                  type: "uri",
                  label: "ดูรายละเอียด",
                  uri: "https://example.com"
                }
              }
            ]
          }
        }
      },
      {
        name: "ลงทะเบียนกิจกรรม",
        altText: "ลงทะเบียน",
        imageUrl: "https://developers-resource.landpress.line.me/fx/clip/clip3.jpg",
        flexJson: {
          type: "bubble",
          body: {
            type: "box",
            layout: "vertical",
            contents: [
              {
                type: "text",
                text: "ร่วมกิจกรรมพิเศษ",
                weight: "bold",
                size: "xl"
              },
              {
                type: "button",
                style: "primary",
                action: {
                  type: "uri",
                  label: "สมัครเลย",
                  uri: "https://example.com/register"
                }
              }
            ]
          }
        }
      }
    ];

    const container = document.getElementById('template-list');
    templates.forEach((tpl, index) => {
      const card = document.createElement('div');
      card.className = 'template-card';

      card.innerHTML = `
        <h3>${tpl.name}</h3>
        <div class="flex-preview">
          <img src="${tpl.imageUrl}" width="240" />
          <p><strong>altText:</strong> ${tpl.altText}</p>
        </div>
        <pre>${JSON.stringify(tpl.flexJson, null, 2)}</pre>
        <button onclick="useTemplate(${index})">เลือกใช้งาน</button>
      `;

      container.appendChild(card);
    });

    function useTemplate(index) {
      const selected = templates[index];
      localStorage.setItem('selectedTemplate', JSON.stringify(selected));
      alert(`เลือก Template: ${selected.name}`);
      // หรือจะ redirect ไปหน้า Share หรือหน้าแก้ไขก็ได้
    }
  </script>
</body>
</html>
